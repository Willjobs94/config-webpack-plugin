"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_path=require("path"),_path2=_interopRequireDefault(_path),_utils=require("./utils"),_utils2=_interopRequireDefault(_utils),ConfigPlugin=function(){function e(t){_classCallCheck(this,e),this.path=t,console.log("Using configuration file: "+this.path),this.contents=_utils2.default.load(this.path),this.contents=_utils2.default.override(this.contents)}return _createClass(e,[{key:"apply",value:function(e){var t=this;e.plugin("normal-module-factory",function(e){e.plugin("after-resolve",function(e,n){if(e.resource.replace(/\.js$/,"")===t.path){console.log("Processsing configuration file: "+t.path);var i=_path2.default.join(__dirname,"config-loader.js"),r=JSON.stringify(t.contents);e.loaders=[i+"?"+r]}return n(null,e)})})}}]),e}();module.exports=ConfigPlugin;